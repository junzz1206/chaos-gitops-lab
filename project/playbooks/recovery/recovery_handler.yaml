---
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# recovery-handler.yaml â€” AlertManager íŠ¸ë¦¬ê±° ë³µêµ¬ í•¸ë“¤ëŸ¬
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- name: ðŸ§© Handle AlertManager Recovery Event
  hosts: all
  become: yes
  vars:
    alert_service: "nginx"
  tasks:
    - name: Log incoming alert trigger
      debug:
        msg: "Alert received from Prometheus AlertManager â€” restarting {{ alert_service }}"

    - name: Restart affected service
      shell: systemctl restart {{ alert_service }}
      ignore_errors: yes

    - name: Verify restart
      shell: systemctl is-active {{ alert_service }}
      register: check_restart
      ignore_errors: yes

    - name: Display result
      debug:
        msg: "Service {{ alert_service }} restarted: {{ check_restart.stdout }}"

